# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –±–æ—Ç–∞

## ‚ö° –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd telegram_bot

# 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –±–æ—Ç
docker-compose down

# 3. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git pull origin main

# 4. –ü–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –æ–±—Ä–∞–∑ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d --build

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose logs -f bot
```

## üìã –ü–æ—à–∞–≥–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞

```bash
docker-compose down
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è, –Ω–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (–ë–î, —Ñ–∞–π–ª—ã) –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ Docker volume.

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ Git

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git pull origin main

# –ò–ª–∏ –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ
git fetch origin
git merge origin/main
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –†—É—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–ï—Å–ª–∏ –≤—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Git, –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç–µ —Ñ–∞–π–ª—ã –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ –ø–∞–ø–∫–µ `app/` –∏ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã (–∫—Ä–æ–º–µ `.env`, `data/`, `docker-compose.yml`).

### –®–∞–≥ 3: –ü–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å Docker –æ–±—Ä–∞–∑

```bash
# –ü–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –≤—Å–µ—Ö —Å–ª–æ–µ–≤
docker-compose up -d --build
```

–≠—Ç–æ –∑–∞–Ω–æ–≤–æ —Å–æ–±–µ—Ä–µ—Ç Docker –æ–±—Ä–∞–∑ —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º, –Ω–æ –æ—Å—Ç–∞–≤–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ volume.

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
docker-compose logs -f bot

# –ù–∞–∂–º–∏—Ç–µ Ctrl+C —á—Ç–æ–±—ã –≤—ã–π—Ç–∏
```

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫.

## üîÑ –û—Ç–∫–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –±–æ—Ç
docker-compose down

# 2. –û—Ç–∫–∞—Ç–∏—Ç—å –∫–æ–¥
git revert HEAD          # –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç
# –∏–ª–∏
git checkout <commit-id> # –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–º–º–∏—Ç

# 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
docker-compose up -d --build

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs -f bot
```

## üêõ –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞: "Database is locked"

```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –±–æ—Ç
docker-compose restart bot

# –ò–ª–∏ –ø–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose down
docker-compose up -d
```

### –û—à–∏–±–∫–∞: "Import error"

```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
docker-compose down
docker-compose up -d --build

# –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ, —É–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑ –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
docker rmi telegram_bot
docker-compose up -d --build
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs bot

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose restart bot
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—Å—Ç–∏–ª—Å—è:**
   ```bash
   docker-compose logs bot | tail -20
   ```
   –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫—É: `Bot started successfully` –∏–ª–∏ –ø–æ—Ö–æ–∂–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ë–î —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞—Å—å:**
   ```bash
   docker-compose exec bot sqlite3 /app/data/database.db "SELECT COUNT(*) FROM user;"
   ```
   –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ë–î

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ:**
   ```bash
   docker-compose exec bot ls -la /app/data/uploads/
   ```

4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É `/start`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

### ‚úÖ –í–°–ï–ì–î–ê –¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ:
- ‚úì –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `docker-compose down` (–±–µ–∑ —Ñ–ª–∞–≥–∞ `-v`)
- ‚úì –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úì –ò–º–µ—Ç—å backup –ë–î –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

### ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ:
- ‚úó `docker-compose down -v` (—É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ!)
- ‚úó –ù–µ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úó –ù–µ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø—Ä—è–º–æ –Ω–∞ production –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

## üì¶ –°–æ–∑–¥–∞–Ω–∏–µ backup –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å backup –ë–î –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏:

```bash
# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –¥–ª—è backup
mkdir -p backups

# –°–æ–∑–¥–∞—Ç—å backup –ë–î
docker run --rm -v telegram_bot_bot_data:/data -v $(pwd):/backup alpine \
  sh -c 'cp /data/database.db /backup/backups/database.db.backup.$(date +%Y%m%d_%H%M%S)'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ backup —Å–æ–∑–¥–∞–ª—Å—è
ls -lh backups/
```

## üÜò –ï—Å–ª–∏ –≤—Å–µ —Å–ª–æ–º–∞–ª–æ—Å—å –∏ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç
docker-compose down

# 2. –û—Ç–∫–∞—Ç–∏—Ç—å –∫–æ–¥ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é
git log --oneline  # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é
git checkout <old-commit-id>

# 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
docker-compose up -d --build

# 4. –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup
docker run --rm -v telegram_bot_bot_data:/data -v $(pwd):/backup alpine \
  sh -c 'cp /backup/backups/database.db.backup.* /data/database.db'

# 5. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å
docker-compose restart bot
```

## üìû –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

–ï—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ –ø–æ–º–æ–≥–ª–æ:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs bot`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `.env` —Ñ–∞–π–ª
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Docker –∏ Docker Compose –æ–±–Ω–æ–≤–ª–µ–Ω—ã
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–ª–Ω—É—é –ø–µ—Ä–µ—Å–±–æ—Ä–∫—É: `docker-compose up -d --build`

---

**–ü–æ–º–Ω–∏—Ç–µ:** –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ Docker volume! üõ°Ô∏è
